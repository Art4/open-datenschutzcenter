{% extends 'client_request/base.html.twig' %}

{% block title %}Hello ClientRequestController!{% endblock %}

{% block content %}
    <div>
        <a href="{{ path('client_index', {'id':team.id}) }}" class="btn btn-primary btn-sm">Zurück zum Portal</a>
        <div class="card card-body">
            <h1 class="h1-responsive text-center">{{ data.title }}</h1>

            <p>
                {% trans %}Email Adresse{% endtrans %}: {{ data.email }} {% if data.emailValid %}✅{% endif %}<br>
                {% trans %}Name{% endtrans %}: {{ data.name }} {% if data.validUser %}✅{% endif %}<br>
                {% trans %}Erstellt am{% endtrans %}: {{ data.createdAt|date('d.m.Y H:i') }}<br>
                {% trans %}Grund der Anfrage{% endtrans %}: {{ data.itemstring }}
            </p>
            <p>
                {% trans %}Beschreibung{% endtrans %}: {{ data.description|raw }}
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card-body card mt-2">
                {{ form_start(form,{'action': path('client_comment',{'id':data.team.id, 'clientRequest':data.id})}) }}
                {{ form_widget(form) }}
                {{ form_end(form) }}
            </div>
        </div>
        <div class="col-md-6 mb-4">
            {% for c in data.clientComments|sort((b, a) => a.createdAt <=> b.createdAt) %}
                <div class="card-body card mt-2">
                    {{ c.name }} - {{ c.createdAt|date('d.m.Y H:i') }}<br>
                    <hr>
                    {{ c.comment|raw }}
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
